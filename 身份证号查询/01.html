<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<style type="text/css">
		body{
			background: #d0eef5;
		}
		.cont{
			margin: 0px;
			height: 30px;
			line-height: 40px;
			color: #30869e;
			padding-left: 100px;
		}
		ul,li{
			list-style: none;
		}

	</style>
</head>
<body>
<div class="container">
		<p class="cont">请输入身份证号或身份证号前6位</p>
		<ul>
			<li>
				<label>身份证号:</label>
				<input class="tab" type="text" name="iCard" id="iCardBtn">
				<button type="button" class="btn-01" style="border: 1px solid black;" id="btn">查询</button>
			</li>
		</ul>
</div>
	<div class="text-center">
		<input type="text" id="originalText" class="border-info rounded" style="height: 30px; width: 40%;padding:0.7rem;">
    </div>
<script src="js/jquery-3.3.1.js"></script>
<script type="text/javascript">
	$("#btn").click(function(){
		var iCardBtn=$("#iCardBtn").val();
		var iCardBtnLength = iCardBtn.length;
		// var originalText = $("#originalText").val();
		// console.log(iCardBtnLength);
		if(iCardBtn !=="" && iCardBtnLength == 6 || iCardBtnLength == 18){
			$.ajax({
				url:'01.php',
				type:'post',
				data:{"iCardBtn":iCardBtn},
				success:function(res){
					if(iCardBtnLength == 6){
						console.log(res);
						//截取从"{"开始直至结束
						var str=res.substring(res.indexOf('{'));
						//console.log(str);
						//去除字符串中多余空格
						str =str.replace(/\s*/g,"");
						//console.log(str);
						//将字符串转化为对象
						const strToObj=JSON.parse(str);
						//console.log(strToObj);
						//将字符串转化为数组
						var arr=[];
						for(let i in strToObj){
							let o={};
							o[i]=strToObj[i];
							arr.push(o)
						}
						console.log(arr);
						var targetCard=arr[2]["result"]["area"];
						//console.log(targetMoney);
						$("#originalText").val(targetCard);
					}else if(iCardBtnLength == 18){
						// 18位这里
						//截取从"{"开始直至结束
						var str=res.substring(res.indexOf('{'));
						//console.log(str);
						//去除字符串中多余空格
						str =str.replace(/\s*/g,"");
						//console.log(str);
						//将字符串转化为对象
						const strToObj=JSON.parse(str);
						//console.log(strToObj);
						//将字符串转化为数组
						var arr=[];
						for(let i in strToObj){
							let o={};
							o[i]=strToObj[i];
							arr.push(o)
						}
						console.log(arr);
						var targetCard=arr[2]["result"]["area"];
						var targetCard1=arr[2]["result"]["birth"];
						var targetCard2=arr[2]["result"]["sex"];
						$("#originalText").val("所属地区是："+targetCard+","+"生日是："+targetCard1+","+"性别是："+targetCard2);
					}
					
				}
			})
		}else{
			alert("输入信息有误");
		}
	})
</script>
</body>
</html>